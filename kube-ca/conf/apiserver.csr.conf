[ req ]
default_bits            = 2048
encrypt_key             = no
prompt                  = no
default_md              = sha256
req_extensions          = req_ext
distinguished_name      = dn

[ dn ]
countryName             = $ENV::CA_COUNTRY
stateOrProvinceName     = $ENV::CA_STATE
localityName            = $ENV::CA_LOCALITY
emailAddress            = $ENV::CA_EMAIL
commonName              = kube-apiserver

[ req_ext ]
extendedKeyUsage=serverAuth
subjectAltName=@alt_names

[ alt_names ]
DNS.1 = kubernetes
DNS.2 = kubernetes.default
DNS.3 = kubernetes.default.svc
DNS.4 = kubernetes.default.svc.cluster
DNS.5 = kubernetes.default.svc.cluster.local
IP.1  = ${ENV::apiserver_ext_ip}
IP.2  = ${ENV::apiserver_int_ip}

